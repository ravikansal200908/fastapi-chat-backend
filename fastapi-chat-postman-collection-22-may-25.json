{"openapi":"3.1.0","info":{"title":"FastAPI Chat API","description":"A modern chat API built with FastAPI","version":"1.0.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["authentication"],"summary":"Register User","description":"Register a new user.","operationId":"register_user_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["authentication"],"summary":"Login","description":"Login user and return JWT token.\n\nSupports JSON requests with username and password.","operationId":"login_api_v1_auth_login_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["authentication"],"summary":"Read Users Me","description":"Get current user information.","operationId":"read_users_me_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/chats/create-chat":{"post":{"tags":["chats"],"summary":"Create Chat","description":"Create a new chat record with initial conversation.\n\nParameters:\n- chat: ChatRecordCreate object containing:\n    - name: Name of the chat\n    - chat_type: Type of chat (DIRECT, GROUP, CHANNEL)\n    - active: Whether the chat is active\n\nReturns:\n- Created chat record\n\nRaises:\n- HTTPException(400): If chat creation fails","operationId":"create_chat_api_v1_chats_create_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRecordCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRecord"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/chats/":{"get":{"tags":["chats"],"summary":"Get Chats","description":"Get all chats for the current user with pagination.\n\nParameters:\n- skip: Number of chats to skip (for pagination)\n- limit: Maximum number of chats to return\n\nReturns:\n- List of chat records\n\nRaises:\n- HTTPException(403): If user is not authenticated","operationId":"get_chats_api_v1_chats__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatRecord"},"title":"Response Get Chats Api V1 Chats  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_id}":{"get":{"tags":["chats"],"summary":"Get Chat","description":"Get a specific chat by ID.\n\nParameters:\n- chat_id: UUID of the chat\n\nReturns:\n- Chat record\n\nRaises:\n- HTTPException(404): If chat not found\n- HTTPException(403): If user doesn't have access to the chat","operationId":"get_chat_api_v1_chats__chat_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRecord"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["chats"],"summary":"Update Chat","description":"Update a chat's metadata.\n\nParameters:\n- chat_id: UUID of the chat\n- chat_in: ChatRecordUpdate object containing:\n    - name: New name for the chat (optional)\n    - active: New active status (optional)\n\nReturns:\n- Updated chat record\n\nRaises:\n- HTTPException(404): If chat not found\n- HTTPException(403): If user doesn't have access to the chat","operationId":"update_chat_api_v1_chats__chat_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRecordUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRecord"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/delete-chat/{chat_id}":{"delete":{"tags":["chats"],"summary":"Delete Chat","description":"Delete a chat and its associated content.\n\nParameters:\n- chat_id: UUID of the chat to delete\n\nReturns:\n- Success message\n\nRaises:\n- HTTPException(404): If chat not found\n- HTTPException(403): If user doesn't have access to the chat","operationId":"delete_chat_api_v1_chats_delete_chat__chat_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Delete Chat Api V1 Chats Delete Chat  Chat Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/messages/add-message":{"post":{"tags":["messages"],"summary":"Add Message","description":"Add a new message to a conversation.\n\nParameters:\n- message_in: MessageCreate object containing:\n    - content: The message content\n    - conversation_id: UUID of the conversation\n\nReturns:\n- Created message object\n\nRaises:\n- HTTPException(404): If conversation not found\n- HTTPException(403): If user doesn't have access to the conversation","operationId":"add_message_api_v1_messages_add_message_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/messages/conversation/{conversation_id}":{"get":{"tags":["messages"],"summary":"Get Conversation Messages","description":"Get all messages in a conversation with pagination.\n\nParameters:\n- conversation_id: UUID of the conversation\n- skip: Number of messages to skip (for pagination)\n- limit: Maximum number of messages to return\n\nReturns:\n- List of messages in the conversation\n\nRaises:\n- HTTPException(404): If conversation not found\n- HTTPException(403): If user doesn't have access to the conversation","operationId":"get_conversation_messages_api_v1_messages_conversation__conversation_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Conversation Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"},"title":"Response Get Conversation Messages Api V1 Messages Conversation  Conversation Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/messages/{message_id}":{"get":{"tags":["messages"],"summary":"Get Message","description":"Get a specific message by ID.\n\nParameters:\n- message_id: UUID of the message\n\nReturns:\n- Message object\n\nRaises:\n- HTTPException(404): If message not found\n- HTTPException(403): If user doesn't have access to the message","operationId":"get_message_api_v1_messages__message_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/messages/get-chat/{chat_id}":{"get":{"tags":["messages"],"summary":"Get Chat","description":"Get all messages in a chat with caching.\n\nParameters:\n- chat_id: UUID of the chat\n- skip: Number of messages to skip (for pagination)\n- limit: Maximum number of messages to return\n\nReturns:\n- List of messages in the chat\n\nRaises:\n- HTTPException(404): If chat not found\n- HTTPException(403): If user doesn't have access to the chat","operationId":"get_chat_api_v1_messages_get_chat__chat_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"},"title":"Response Get Chat Api V1 Messages Get Chat  Chat Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/branches/create-branch":{"post":{"tags":["branches"],"summary":"Create Branch","description":"Create a new branch from a specific message.\n\nParameters:\n- branch_in: BranchCreate object containing:\n    - parent_chat_id: UUID of the parent chat\n    - message_id: UUID of the message to branch from\n\nReturns:\n- Created branch record\n\nRaises:\n- HTTPException(404): If parent chat or message not found\n- HTTPException(403): If user doesn't have access to the parent chat","operationId":"create_branch_api_v1_branches_create_branch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BranchCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Branch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/branches/get-branches/{chat_id}":{"get":{"tags":["branches"],"summary":"Get Branches","description":"Get all branches for a chat.\n\nParameters:\n- chat_id: UUID of the parent chat\n\nReturns:\n- List of branch records\n\nRaises:\n- HTTPException(404): If parent chat not found\n- HTTPException(403): If user doesn't have access to the parent chat","operationId":"get_branches_api_v1_branches_get_branches__chat_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Branch"},"title":"Response Get Branches Api V1 Branches Get Branches  Chat Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/branches/set-active-branch/{branch_id}":{"get":{"tags":["branches"],"summary":"Set Active Branch","description":"Set a specific branch as active.\n\nParameters:\n- branch_id: UUID of the branch to activate\n\nReturns:\n- Updated branch record\n\nRaises:\n- HTTPException(404): If branch not found\n- HTTPException(403): If user doesn't have access to the branch","operationId":"set_active_branch_api_v1_branches_set_active_branch__branch_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"branch_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Branch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Set Active Branch Api V1 Branches Set Active Branch  Branch Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/branches/get-branch-tree/{chat_id}":{"get":{"tags":["branches"],"summary":"Get Branch Tree","description":"Get a complete tree of all branches for a chat.\n\nParameters:\n- chat_id: UUID of the parent chat\n\nReturns:\n- Tree structure of all branches with their relationships\n\nRaises:\n- HTTPException(404): If parent chat not found\n- HTTPException(403): If user doesn't have access to the parent chat","operationId":"get_branch_tree_api_v1_branches_get_branch_tree__chat_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chat Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Branch Tree Api V1 Branches Get Branch Tree  Chat Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.\n\nReturns:\n- dict: Health status","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Branch":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"chat_type":{"$ref":"#/components/schemas/ChatType"},"active":{"type":"boolean","title":"Active","default":true},"chat_id":{"type":"string","format":"uuid4","title":"Chat Id"},"account_id":{"type":"string","title":"Account Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","chat_type","chat_id","account_id","created_at","updated_at"],"title":"Branch"},"BranchCreate":{"properties":{"parent_chat_id":{"type":"string","format":"uuid4","title":"Parent Chat Id"},"message_id":{"type":"string","format":"uuid4","title":"Message Id"}},"type":"object","required":["parent_chat_id","message_id"],"title":"BranchCreate"},"ChatRecord":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"chat_type":{"$ref":"#/components/schemas/ChatType"},"active":{"type":"boolean","title":"Active","default":true},"chat_id":{"type":"string","format":"uuid4","title":"Chat Id"},"account_id":{"type":"string","title":"Account Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["name","chat_type","chat_id","account_id","created_at","updated_at"],"title":"ChatRecord"},"ChatRecordCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"chat_type":{"$ref":"#/components/schemas/ChatType"},"active":{"type":"boolean","title":"Active","default":true}},"type":"object","required":["name","chat_type"],"title":"ChatRecordCreate"},"ChatRecordUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Active"}},"type":"object","title":"ChatRecordUpdate"},"ChatType":{"type":"string","enum":["DIRECT","GROUP","CHANNEL"],"title":"ChatType"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Message":{"properties":{"content":{"type":"string","minLength":1,"title":"Content"},"id":{"type":"string","format":"uuid4","title":"Id"},"conversation_id":{"type":"string","format":"uuid4","title":"Conversation Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["content","id","conversation_id","created_at"],"title":"Message"},"MessageCreate":{"properties":{"content":{"type":"string","minLength":1,"title":"Content"},"conversation_id":{"type":"string","format":"uuid4","title":"Conversation Id"}},"type":"object","required":["content","conversation_id"],"title":"MessageCreate"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username"},"id":{"type":"string","format":"uuid4","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["email","username","id","is_active","created_at","updated_at"],"title":"User"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"username":{"type":"string","maxLength":50,"minLength":3,"title":"Username"},"password":{"type":"string","minLength":8,"title":"Password"},"confirm_password":{"type":"string","minLength":8,"title":"Confirm Password"}},"type":"object","required":["email","username","password","confirm_password"],"title":"UserCreate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}